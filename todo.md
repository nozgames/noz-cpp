# Todo

- [ ] moving bones in some loaded animations move weird, maybe rotation or incorrect matrcieis
- [ ] not rendering root bone and cant extrude
- [ ] asset name should render below the bounds of an asset
- [ ] Sort order ([ ])

- [ ] reparenting bone messes up already loaded animations, have them fix their bones
- [ ] editor animation likely leaking animation and skeleton asset 
- [ ] vfx hotload broken
- [ ] new clone animation
- [ ] hold frames (h then number)
- [ ] g r to reset / r r rather than alt-g and alt-r
- [ ] Seems to be reimporting assets
- [ ] Instance a skelton so we can parent different skinned meshes (sotre the instances in the meta file for the skeleton)
- [ ] Button to disable color and show grey scale
- [ ] onion skin on animation
- [ ] bone scale
- [ ] Circle pie chart for height and edge on verts
- [ ] show all bounds of assets when alt is down
- [ ] New animation use selected skeleton to create
- [ ] hover on animation should play ?
- [ ] Saving an asset is causing a double import (.meta?)
- [ ] Saving an asset should suppress the import notification 
- [ ] convert props to be struct
- [ ] Need way to handle invalid assets (show invalid or error in editor, animation with missing skeleton for example)
- [ ] Animation with no frames not loading
- [ ] After creating new mesh I cannot select bones in the skeleton view
- [ ] Outline size tool
- [ ] button duplicate a frame
- [ ] button copy a frame
- [ ] button paste a frame

- [ ] zoom should zoom in at cursor
- [ ] Single shader!
- [ ] First time you load the shader is not loaded and it messes up, we need to handle the hotload?
- [ ] No way to see log messages anymore, we need a console window (win32 window you can open?)
- [ ] Saved animation and its loading for Q / R but not play
- [ ] when moving bones in animation we have to recalculate the local position from the world after delta change
- [ ] Onion skinning (alt-o) toggle ?
- [ ] Normalize selection colors to blender colors
- [ ] Animate bone color to blue like blender
- [ ] New mesh has no color or edges
- [ ] Remove dirty flag from assets
- [ ] Animation editor should use its own bone selected state not the skeletons
- [ ] Load editor assets in job
- [ ] Skeleton bounds should include the meshes
- [ ] Rotate tool in skeleton editor not working correctly (should rotate the points around center
- [ ] Clean up mesh dirty flag, just use mesh?
- [ ] Undo for color change
- [ ] Undo for height change
- [ ] Undo for adding vertex
- [ ] Hard to see vertices in edit mode because of border color
- [ ] Selecting a mesh asset should account for border in selection
- [ ] Alt-drag on asset to create instance  (draw origin in blue and outline a lighter grey)
- [ ] skeleton editor bone rotate tool
- [ ] skeleton editor bone move tool
- [ ] Set border color
- [ ] Why isnt it closing? (thread lock) (job system)
- [ ] m to merge vertices (broken)
- [ ] x to dissovlve vertices, faces, edges
- [ ] highlight triangle when selected
- [ ] highlight edge when selected
- [ ] Light color in the editor config
- [ ] Save the light position
- [ ] Use TextInput for typing after move or scale command
- [ ] Pressing g or r should stop the previous g or r and start a new one
- [ ] calculate normals for faces
- [ ] Save window positino as well as size
- [ ] bug with saving window size, sometimes wrong size
- [ ] button to set how hard an edge is, soft on a quad will average normals 
- [ ] Box select being pushed it making the color go away, is that ok?
- [ ] When you add a vertex interpolate the height from the neighbors
- [ ] highlight colors of selected triangles in the triangle ui
- [ ] add face if 3 verts are selected and no triangle there
- [ ] single click to select asset, ctrl to toggle
- [ ] Change UI, vertex size, edge size, etc to not scale with the window size
- [ ] combined vertex buffer for rendering so we can stream data to it like triangles?  
- [ ] key to hide / show palette (c?)
- [ ] e for extrude
- [ ] x to limit move
- [ ] y to limit move
- [ ] Scene asset 
- [ ] Scene editor

- [ ] Auto complete on commands
- [ ] Job system
- [ ] Trace a font out with meshes?
- [ ] shader include dependency handling.
- [ ] configurable outline color
- [ ] Trail vfx for individual particles
- [ ] vfx initial_rotation and rotation over time
- [ ] style sheet inherit not working
- [ ] Localized strings
- [ ] hot load of textures
- [ ] hot load of sounds
- [ ] Something causes a spawn of error messages in the editor when client disconnects / reconnects, not sure which
- [ ] Clean importer.cpp

- [X] Auto generate names from styles and other things that have names in g_names....- [ ] Push / Pop the scratch before each asset load or NAME_*
- [X] Bug with default styles in style sheets causing width and height to not be auto
- [X] Focus gain / lost event
- [X] hot load of style sheets
- [X] hot load of vfx
- [X] separate opacity from color in vfx
- [X] ctrl + drag = snap
- [X] Move meshz to the editor (--edit to enter edit mode)
- [x] move nozed to its own repo using the noz library
- [X] edit mode on specific asset with tab
- [X] When opening asset editor open all meshes
- [X] save the world canvas position of mesh in the .meta file
- [X] hot load of meshes
- [X] g - move
- [X] Draw pivot point
- [X] s - scale
- [x] zoom limits
- [x] scaled zoom
- [x] edges and vertices not rendering correctly
- [x] multi-select of objects in the world
- [x] Notification system in the bottom right (Saving)
- [x] click on a face to select face
- [x] click on vertex to select vertex
- [x] click on edge to select edge
- [x] Ctrl-s save
- [x] Palette uv is wrong, can see left?
- [X] click detection on ui
- [X] color picker to select color
- [X] converted editable mesh to use vec3 so we can calc normals
- [X] Change palette to be 128x128 which is 256 colors at 8x8 per color
- [X] moving objects in the world should use the g key too
- [X] Clicking on a color deselects the verts because the click is making it through
- [x] hitting zero while doing height should zero it
- [X] Show a height slider centered around the click point when adjusting height
- [X] Draw a line from to the center for scale
- [X] When window closes uninit renderr and asset editor (only if window is created later)
- [X] Load asset editor when :e
- [X] if asset name is specified after :e then focus on it in editor
- [X] Text input by watching WM_CHAR in windows
- [X] Alt-tab should not trigger edit mode
- [X] : when in asset editor should allow commands to be typed in terminal (forward keys there or something?)
- [X] :s to save
- [X] outlines
- [X] undo / redo (whole mesh)
- [x] new mesh format similar to obj
- [X] Show origin when asset is selected
- [X] check if importer.cpp is handling meta dependency and remove the code from importers
- [x] :n to make a new file  n <type> <name>
- [X] r - rotate
- [X] Border seems to be generating different sizes for different meshes
- [X] saving a mesh after initially creating it does not work
- [x] panning is resetting
- [x] panning does not work in mesh editor
- [x] Shift and ctrl in box select for mesh
- [x] box select is too easy to trigger
- [X] only select points, edges, faces on mouse up if there was no box select
- [X] Left click to finish tool in mesh editor should not deselect
- [x] Selecting a vertex should select the closest vertex, not the first one it finds
- [x] when rotating an edge the selected verticies need to change
- [x] need way to create new points not on mesh (v, find closest edge,
- [X] Adding vertex is creating bad triangles, fix winding
- [X] improve the height and normals when adding a new vertex
- [X] r to rotate edge
- [X] Limit height to -1 to 1
- [x] hot load of shaders
- [X] add vert to center of triangle
- [X] Right click to change light position
- [X] Shortcut system
- [X] Draw vfx bounds (calc vfx bounds)
- [X] Cant select vertex in mesh edit mode?
- [X] Frame when in mesh edit mode not working
- [X] Add vertex to center of quad messed up
- [X] Bounds renderer
- [X] Right click to pan instead of space
- [X] Middle mouse to set light position
- [X] System cursors (hand for pan, size for scale)
- [X] create bone tool, e ?
- [X] Calculate the bounds of skeleton
- [X] calculate bounds on vfx so we can hide them and select them easier
- [X] Save animations in a better format
- [X] animation asset
- [X] Play mode
- [X] Changes to skinned meshes are not saving
- [X] Animation / Skeletons
- [X] Animator
- [X] animation editor
- [X] Bone names should be in name header
- [X] Play test animation in game
- [X] Add skeleton bones as names automatically
- [X] notification for reimporting asset
- [X] Alt to show names ?
- [X] Skeleton should be using name table in serialized bones for names
- [X] Need way to rename bone (:r bone name
- [X] button insert a frame (i)
- [X] button to add a frame (o)
- [X] button delete a frame
- [X] Dashed lines are wrong
- [X] Changes to to animations are not saving always
- [X] App not shutting down
- [X] Select closest bone
- [X] move and rotate commit in skeleton view is selecting bones
- [X] stop importing all assets on laod if they havent changed
- [X] Handle hot load import jobs (run the reload on the main thread)
- [X] Extrude broken
- [X] Skinned meshes not rendering on skeleton
- [X] Delete bone
- [X] If the same skinned mesh is on diff bones in a skeelton one gets overwritten
- [X] Draw whole bone in animation view
- [X] Text in import notification is bad
- [X] Draw bone names in the center
- [X] Bone names not rendering correctly in animation view
- [X] Rotate is showing wrong center for animate
- [X] skeleton bone rotations not saving
- [X] Bone selection in animation  
- [X] Play mode is throwing asserts
- [X] Render whole bone as selected
- [X] Select bone in skeleton view by clicking on it (almost, should factor in the actual visual)
- [X] Add rotation to skeleton bones which is the angle of the bone from parent
- [X] Dont allow duplicate bone names in animation
- [X] Playing animation in editor does not animate mesh
- [X] skeleton editor bind mesh
- [x] leaving edit mode when animation playing leaves animation playing
- [X] Positions not saving
- [X] Bounds not including all bones in animation and skeleton
- [X] editor config change should force reimport
- [X] Alt-g and alt-r not working in animatino (prob not updating transfroms)
- [X] Default folders for types so you dont need to specify when doing new
- [X] Mesh hit test should use mesh rather than editor mesh
- [X] Bone selection in skeleton not working
- [X] Change rotation on skeleton to to not change the visuals and just be the baseline
- [X] Move edtior draw to vtable
- [X] Move edtior update to vtable
- [X] Skeleton bone selection broken
- [X] Move the clone methods to use the vtable
- [X] Move getselectedbounds to vtable
- [X] no undo on skeleton bone move or rotate
- [X] new should clone the selected if it can
- [X] Something wrong with animation as resetting does not work
- [x] move editor update to vtable
- [X] Really need undo to work properly
- [X] animation bounds is not correct until you hit tab on it
- [X] Deleting a bone messed up all the animatinos even though the bone wasnt a leaf
